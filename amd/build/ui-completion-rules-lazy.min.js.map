{"version":3,"file":"ui-completion-rules-lazy.min.js","sources":["../src/ui-completion-rules-lazy.js"],"sourcesContent":["/* eslint-disable */\n/* Do not edit directly, refer to ui/ folder. */\ndefine([\"block_xp/ui-commons-lazy\"],() => { return /******/ (() => { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 913:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  App: () => (/* binding */ App),\n  dependencies: () => (/* binding */ dependencies),\n  startApp: () => (/* binding */ startApp)\n});\n\n// EXTERNAL MODULE: ./node_modules/@headlessui/react/dist/components/tabs/tabs.js + 2 modules\nvar tabs = __webpack_require__(848);\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(540);\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(961);\n// EXTERNAL MODULE: ./node_modules/react-query/es/index.js\nvar es = __webpack_require__(942);\n// EXTERNAL MODULE: ./node_modules/@headlessui/react/dist/components/menu/menu.js + 13 modules\nvar menu = __webpack_require__(929);\n;// CONCATENATED MODULE: ./ui/src/lib/utils.ts\nconst utils_classNames = (...args) => args.filter(Boolean).join(\" \");\nconst fifoCache = (maxItems = 128) => {\n    let items = {};\n    let keys = [];\n    const purge = () => {\n        if (keys.length > maxItems) {\n            const idx = Math.max(0, keys.length - maxItems);\n            keys.slice(0, idx).forEach((key) => {\n                delete items[key];\n            });\n            keys = keys.slice(idx);\n        }\n    };\n    return {\n        set: (key, value) => {\n            items[key] = value;\n            keys.push(key);\n            purge();\n        },\n        get: (key) => {\n            return items[key];\n        },\n    };\n};\nlet uniqueId = 0;\nconst getUniqueId = () => {\n    return `xp-${Date.now()}-${uniqueId++}`;\n};\nconst stripTags = (html) => {\n    var tmp = document.createElement(\"div\");\n    tmp.innerHTML = html;\n    return tmp.textContent || tmp.innerText || \"\";\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Dropdown.tsx\n\n\n\nconst Dropdown = ({ buttonLabel, items }) => {\n    return (react.createElement(menu/* Menu */.W, { as: \"div\", className: \"dropdown\" },\n        react.createElement(menu/* Menu */.W.Button, { className: \"btn btn-link btn-icon icon-size-3 rounded-circle\" },\n            react.createElement(\"i\", { className: \"fa fa-ellipsis-v text-dark py-2\", \"aria-hidden\": \"true\" }),\n            react.createElement(\"span\", { className: \"xp-sr-only\" }, buttonLabel)),\n        react.createElement(menu/* Menu */.W.Items, { className: \"dropdown-menu dropdown-menu-right xp-block\" }, items.map((item) => {\n            if (\"divider\" in item) {\n                return react.createElement(\"div\", { key: item.id, className: \"dropdown-divider\" });\n            }\n            return (react.createElement(menu/* Menu */.W.Item, { key: item.id }, ({ active }) => (react.createElement(\"a\", { ...item.props, className: utils_classNames(\"dropdown-item\", item.danger ? \"text-danger\" : null) }, item.label))));\n        }))));\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Loading.tsx\n\nconst AppLoading = () => {\n    return (react.createElement(\"div\", { className: \"block_xp-react-loading\" },\n        react.createElement(\"div\", { className: \"xp-grid xp-grid-cols-2 xp-gap-4 xp-animate-pulse\" },\n            react.createElement(\"div\", { className: \"xp-col-span-2 xp-bg-gray-100 xp-rounded xp-h-4\" }),\n            react.createElement(\"div\", { className: \"xp-bg-gray-100 xp-rounded xp-h-4\" }),\n            react.createElement(\"div\", { className: \"xp-bg-gray-100 xp-rounded xp-h-4\" }))));\n};\n\n;// CONCATENATED MODULE: ./ui/src/lib/moodle.ts\n\nconst M = window.M;\nconst modules = {};\n/**\n * List of modules that we currently depend on statically.\n *\n * Preferrably, modules should be loaded with getModuleAsync, which\n * does not require their definition to be declared in our apps.\n */\nconst commonStaticModulesToDependOn = [\n    \"core/notification\",\n    \"core/aria\",\n    \"?core/toast\",\n    \"jquery\",\n];\nasync function ajaxRequest(method, args) {\n    const Ajax = await getModuleAsync(\"core/ajax\");\n    return Ajax.call([{\n            methodname: method,\n            args,\n        }])[0];\n}\nfunction getString(id, component, a) {\n    return M.util.get_string(id, component, a);\n}\nfunction getUrl(uri) {\n    if (uri[0] != \"/\") {\n        uri = \"/\" + uri;\n    }\n    return M.cfg.wwwroot + uri;\n}\nfunction hasString(id, component) {\n    return typeof M.str[component] !== \"undefined\" && typeof M.str[component][id] !== \"undefined\";\n}\nfunction getModule(name) {\n    return modules[name];\n}\nasync function getModuleAsync(amd) {\n    if (modules[amd]) {\n        return modules[amd];\n    }\n    return new Promise((resolve, reject) => {\n        // @ts-ignore\n        window.require([amd], (mod) => {\n            modules[amd] = mod;\n            resolve(mod);\n        }, reject);\n    });\n}\nfunction moodle_imageUrl(name, component) {\n    return M.util.image_url(name, component);\n}\nfunction moodle_isBehatRunning() {\n    return M.cfg.behatsiterunning;\n}\nlet loadStringCache = fifoCache(64);\nasync function loadString(id, component) {\n    const cacheKey = `${id}/${component}`;\n    let promise = loadStringCache.get(cacheKey);\n    if (!promise) {\n        const Str = await getModuleAsync(\"core/str\");\n        promise = Str.get_string(id, component);\n        loadStringCache.set(cacheKey, promise);\n    }\n    return await promise;\n}\nasync function loadStrings(ids, component) {\n    const cacheKey = `${ids.join(\",\")}/${component}`;\n    let promise = loadStringCache.get(cacheKey);\n    if (!promise) {\n        const Str = await getModuleAsync(\"core/str\");\n        promise = Str.get_strings(ids.map((id) => ({ key: id, component })));\n        loadStringCache.set(cacheKey, promise);\n    }\n    return await promise;\n}\nconst makeDependenciesDefinition = (names) => {\n    let optional = [];\n    const list = names.map((name) => {\n        const isOptional = name.charAt(0) === \"?\";\n        const module = isOptional ? name.substring(1) : name;\n        if (isOptional) {\n            optional.push(module);\n        }\n        return module;\n    });\n    return {\n        list,\n        optional,\n        loader: (mods) => {\n            mods.forEach((mod, i) => {\n                setModule(list[i], mod);\n            });\n        },\n    };\n};\nfunction setModule(name, mod) {\n    modules[name] = mod;\n}\n\n;// CONCATENATED MODULE: ./ui/src/lib/contexts.ts\n\nconst makeAddonContextValueFromAppProps = (props) => {\n    return {\n        activated: false,\n        enablepromo: true,\n        promourl: \"https://www.levelup.plus/xp/\",\n        ...(props?.addon ?? {}),\n    };\n};\nconst contexts_AddonContext = (0,react.createContext)({\n    activated: false,\n    enablepromo: true,\n    promourl: \"https://www.levelup.plus/xp/\", // Local promo page where possible.\n});\n\n;// CONCATENATED MODULE: ./ui/src/lib/hooks.ts\n\n\n\n\nconst useAddonActivated = () => {\n    return useContext(AddonContext).activated;\n};\nconst hooks_useAnchorButtonProps = (onClick) => {\n    const listeners = useRoleButtonListeners(onClick);\n    return {\n        href: \"#\",\n        role: \"button\",\n        ...listeners,\n    };\n};\nconst useModules = (modules) => {\n    const modulesPromise = (0,react.useRef)();\n    const modulesRef = (0,react.useRef)();\n    const [ready, setReady] = (0,react.useState)(false);\n    (0,react.useEffect)(() => {\n        if (modulesRef.current)\n            return;\n        if (!modulesPromise.current) {\n            modulesPromise.current = Promise.all(modules.map((module) => getModuleAsync(module)));\n        }\n        let cancelled = false;\n        modulesPromise.current.then((loadedModles) => {\n            if (cancelled)\n                return;\n            modulesRef.current = modules.reduce((acc, module, i) => {\n                acc[module] = loadedModles[i];\n                return acc;\n            }, {});\n            setReady(true);\n        });\n        return () => {\n            cancelled = true;\n        };\n    });\n    const getModule = (0,react.useCallback)((module) => {\n        if (!modulesRef.current)\n            return null;\n        return modulesRef.current[module] ?? null;\n    }, [ready, modulesRef.current]);\n    return {\n        getModule,\n    };\n};\nconst hooks_useNumericInputProps = (value, onChange) => {\n    const valueAsString = value.toString();\n    const [externalValue, setExternalValue] = (0,react.useState)(valueAsString);\n    const [internalValue, setInternalValue] = (0,react.useState)(externalValue);\n    (0,react.useEffect)(() => {\n        if (valueAsString !== externalValue) {\n            setExternalValue(valueAsString);\n            setInternalValue(valueAsString);\n        }\n    });\n    const handleBlur = (e) => {\n        const v = parseInt(internalValue, 10) || 0;\n        setExternalValue(v.toString());\n        onChange(v);\n    };\n    const handleChange = (e) => {\n        setInternalValue(e.target.value.replace(/[^0-9]/, \"\"));\n    };\n    return {\n        value: internalValue,\n        onChange: handleChange,\n        onBlur: handleBlur,\n    };\n};\nconst useRoleButtonListeners = (onClick) => {\n    const handleClick = (e) => {\n        e.preventDefault();\n        onClick();\n    };\n    const handleKeyDown = (e) => {\n        if (e.key !== \" \" && e.key !== \"Enter\") {\n            return;\n        }\n        e.preventDefault();\n        onClick();\n    };\n    return {\n        onClick: handleClick,\n        onKeyDown: handleKeyDown,\n    };\n};\nconst useUnloadCheck = (isDirty) => {\n    const str = hooks_useString(\"changesmadereallygoaway\", \"core\");\n    useEffect(() => {\n        const fn = (e) => {\n            if (!isDirty || isBehatRunning()) {\n                return;\n            }\n            e.preventDefault();\n            e.returnValue = str;\n            return str;\n        };\n        window.addEventListener(\"beforeunload\", fn);\n        return () => {\n            window.removeEventListener(\"beforeunload\", fn);\n        };\n    });\n};\nconst useUniqueId = () => {\n    const [id] = (0,react.useState)(getUniqueId());\n    return id;\n};\nconst hooks_useString = (id, component = \"block_xp\", a) => {\n    const wasKnownAtMount = (0,react.useMemo)(() => hasString(id, component), [id, component]);\n    const [isLoaded, setLoaded] = (0,react.useState)(false);\n    // When the string changes, remove the promise.\n    (0,react.useEffect)(() => {\n        setLoaded(false);\n    }, [id, component]);\n    // Load the string when it is unknown.\n    (0,react.useEffect)(() => {\n        if (wasKnownAtMount || isLoaded) {\n            return;\n        }\n        let cancelled = false;\n        (async () => {\n            try {\n                await loadString(id, component);\n                if (!cancelled) {\n                    setLoaded(true);\n                }\n            }\n            catch (err) { }\n        })();\n        return () => {\n            cancelled = true;\n        };\n    });\n    return hasString(id, component) ? getString(id, component, a) : \"​\";\n};\nconst hooks_useStrings = (ids, component = \"block_xp\") => {\n    const idsForKey = ids.join(\",\");\n    const allKnownAtMount = (0,react.useMemo)(() => ids.every((id) => hasString(id, component)), [idsForKey, component]);\n    const [isLoaded, setLoaded] = (0,react.useState)(false);\n    // When the string changes, remove the promise.\n    (0,react.useEffect)(() => {\n        setLoaded(false);\n    }, [idsForKey, component]);\n    // Load the string when it is unknown.\n    (0,react.useEffect)(() => {\n        if (allKnownAtMount || isLoaded) {\n            return;\n        }\n        let cancelled = false;\n        (async () => {\n            try {\n                await loadStrings(ids, component);\n                if (!cancelled) {\n                    setLoaded(true);\n                }\n            }\n            catch (err) { }\n        })();\n        return () => {\n            cancelled = true;\n        };\n    });\n    return (id, a) => (hasString(id, component) ? getString(id, component, a) : \"​\");\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Modal.tsx\n\n\n\nconst SaveCancelModal = ({ children, onClose, onSave, show, title, saveButtonText, defaultHeight, large, canSave = true }) => {\n    const modalPromise = (0,react.useRef)();\n    const modalRef = (0,react.useRef)();\n    const { getModule } = useModules([\"core/modal_factory\", \"core/modal_events\"]);\n    const [ready, setReady] = (0,react.useState)(false);\n    const getSaveButton = (0,react.useCallback)(() => {\n        if (!modalRef.current)\n            return null;\n        const node = modalRef.current.getFooter()[0].querySelector('[data-action=\"save\"]');\n        return node ?? null;\n    }, [modalRef.current]);\n    const setSaveButtonText = (text) => {\n        const saveBtn = getSaveButton();\n        if (!saveBtn || !text)\n            return;\n        saveBtn.textContent = text;\n    };\n    const setButtonAttribute = (attr, value) => {\n        const saveBtn = getSaveButton();\n        if (!saveBtn || !attr)\n            return;\n        if (value === null || typeof value === \"undefined\" || value === false) {\n            saveBtn.removeAttribute(attr);\n        }\n        else {\n            saveBtn.setAttribute(attr, value);\n        }\n    };\n    // Create the modal object.\n    (0,react.useEffect)(() => {\n        let cancelled = false;\n        if (modalRef.current)\n            return;\n        const ModalFactory = getModule(\"core/modal_factory\");\n        if (!ModalFactory)\n            return;\n        if (!modalPromise.current) {\n            modalPromise.current = ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: title,\n                large: large,\n                body: `<div class='block_xp' style='${defaultHeight ? `height: ${defaultHeight}px` : \"\"}'></div>`,\n            });\n        }\n        modalPromise.current.then((modal) => {\n            if (cancelled)\n                return;\n            modalRef.current = modal;\n            if (saveButtonText) {\n                setSaveButtonText(saveButtonText);\n            }\n            setReady(true); // State update to force re-render.\n            if (show) {\n                modal.show();\n            }\n        });\n        return () => {\n            cancelled = true;\n        };\n    });\n    // Attach event listeners.\n    (0,react.useEffect)(() => {\n        const modal = modalRef.current;\n        if (!modal)\n            return;\n        const ModalEvents = getModule(\"core/modal_events\");\n        if (!ModalEvents)\n            return;\n        const root = modal.getRoot();\n        const handleSave = (e) => {\n            onSave && onSave(e);\n        };\n        const handleClose = () => {\n            onClose && onClose();\n        };\n        // Keep the React node height in sync with the modal body to avoid for the modal\n        // to become scrollable. This is required because our current modal content is\n        // absolute and thus requires a hardcoded height.\n        const updateReactNodeHeight = () => {\n            const body = modal.getBody()[0];\n            const reactNode = body ? body.querySelector(\".block_xp\") : null;\n            if (!body || !reactNode) {\n                return;\n            }\n            const height = body.clientHeight - (parseFloat(getComputedStyle(body).paddingTop) + parseFloat(getComputedStyle(body).paddingBottom));\n            reactNode.style.height = `${height}px`;\n        };\n        const attachResize = () => {\n            window.addEventListener(\"resize\", updateReactNodeHeight);\n        };\n        const deattachResize = () => {\n            window.addEventListener(\"resize\", updateReactNodeHeight);\n        };\n        root.on(ModalEvents.save, handleSave);\n        root.on(ModalEvents.hidden, handleClose);\n        root.on(ModalEvents.shown, attachResize);\n        return () => {\n            root.off(ModalEvents.save, handleSave);\n            root.off(ModalEvents.hidden, handleClose);\n            root.off(ModalEvents.shown, deattachResize);\n        };\n    });\n    // Update visibility.\n    (0,react.useEffect)(() => {\n        if (!modalRef.current)\n            return;\n        if (show) {\n            modalRef.current.show();\n        }\n        else {\n            modalRef.current.hide();\n        }\n    }, [show, modalRef.current]);\n    // Update title.\n    (0,react.useEffect)(() => {\n        if (!modalRef.current || !title)\n            return;\n        modalRef.current.setTitle(title);\n    }, [title, modalRef.current]);\n    // Update save button text.\n    (0,react.useEffect)(() => {\n        setSaveButtonText(saveButtonText);\n    }, [saveButtonText, modalRef.current]);\n    // Update the save button status.\n    (0,react.useEffect)(() => {\n        setButtonAttribute(\"disabled\", !canSave);\n    }, [canSave, modalRef.current]);\n    return modalRef.current ? react_dom.createPortal(children, modalRef.current.getBody()[0].querySelector(\".block_xp\")) : null;\n};\nconst DeleteModal = ({ children, onClose, onDelete, show, title }) => {\n    const modalPromise = (0,react.useRef)();\n    const modalRef = (0,react.useRef)();\n    const [ready, setReady] = (0,react.useState)(false);\n    const deleteStr = hooks_useString(\"delete\", \"core\");\n    const { getModule } = useModules([\"core/modal_factory\", \"core/modal_events\"]);\n    const getDeleteButton = (0,react.useCallback)(() => {\n        if (!modalRef.current)\n            return null;\n        const node = modalRef.current.getFooter()[0].querySelector('[data-action=\"save\"]');\n        return node ?? null;\n    }, [modalRef.current]);\n    // Create the modal object.\n    (0,react.useEffect)(() => {\n        let cancelled = false;\n        if (modalRef.current)\n            return;\n        const ModalFactory = getModule(\"core/modal_factory\");\n        if (!ModalFactory)\n            return;\n        if (!modalPromise.current) {\n            modalPromise.current = ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL, // We use save_cancel as delete_cancel is only in 4.2.\n                title: title,\n                body: `<div class='block_xp'></div>`,\n            });\n        }\n        modalPromise.current.then((modal) => {\n            if (cancelled)\n                return;\n            modalRef.current = modal;\n            const deleteButton = getDeleteButton();\n            if (deleteButton) {\n                if (deleteStr) {\n                    deleteButton.textContent = deleteStr;\n                }\n                deleteButton.classList.add(\"btn-danger\");\n            }\n            setReady(true); // State update to force re-render.\n            if (show) {\n                modal.show();\n            }\n        });\n        return () => {\n            cancelled = true;\n        };\n    });\n    // Attach event listeners.\n    (0,react.useEffect)(() => {\n        const modal = modalRef.current;\n        if (!modal)\n            return;\n        const ModalEvents = getModule(\"core/modal_events\");\n        if (!ModalEvents)\n            return;\n        const root = modal.getRoot();\n        const handleSave = (e) => {\n            onDelete && onDelete(e);\n        };\n        const handleClose = () => {\n            onClose && onClose();\n        };\n        root.on(ModalEvents.save, handleSave);\n        root.on(ModalEvents.hidden, handleClose);\n        return () => {\n            root.off(ModalEvents.save, handleSave);\n            root.off(ModalEvents.hidden, handleClose);\n        };\n    });\n    // Update visibility.\n    (0,react.useEffect)(() => {\n        if (!modalRef.current)\n            return;\n        if (show) {\n            modalRef.current.show();\n        }\n        else {\n            modalRef.current.hide();\n        }\n    }, [show, modalRef.current]);\n    // Update title.\n    (0,react.useEffect)(() => {\n        if (!modalRef.current || !title)\n            return;\n        modalRef.current.setTitle(title);\n    }, [title, modalRef.current]);\n    // Update button.\n    (0,react.useEffect)(() => {\n        if (!modalRef.current || !deleteStr)\n            return;\n        const btn = getDeleteButton();\n        if (!btn)\n            return;\n        btn.textContent = deleteStr;\n    }, [deleteStr, modalRef.current]);\n    return modalRef.current ? react_dom.createPortal(children, modalRef.current.getBody()[0].querySelector(\".block_xp\")) : null;\n};\nconst ModalForm = ({ formClass, formArgs, onClose, onSubmit, title }) => {\n    const modalFormRef = (0,react.useRef)();\n    const { getModule } = useModules([\"core_form/modalform\", \"core/modal_factory\", \"core/modal_events\"]);\n    // Create the modal form.\n    (0,react.useEffect)(() => {\n        if (modalFormRef.current)\n            return;\n        const ModalForm = getModule(\"core_form/modalform\");\n        if (!ModalForm)\n            return;\n        modalFormRef.current = new ModalForm({\n            formClass: formClass,\n            args: formArgs ?? {},\n            modalConfig: {\n                title,\n            },\n        });\n        modalFormRef.current.show();\n    });\n    // Attach event listeners.\n    (0,react.useEffect)(() => {\n        const modalForm = modalFormRef.current;\n        if (!modalForm)\n            return;\n        const ModalForm = getModule(\"core_form/modalform\");\n        const ModalEvents = getModule(\"core/modal_events\");\n        if (!ModalForm || !ModalEvents)\n            return;\n        const handleLoaded = () => {\n            const root = modalForm.modal.getRoot();\n            root[0].classList.add(\"block_xp\");\n            // Register the onClose event.\n            root.on(ModalEvents.hidden, handleClose);\n        };\n        const handleSubmit = () => {\n            onSubmit && onSubmit();\n        };\n        const handleClose = () => {\n            onClose && onClose();\n        };\n        modalForm.addEventListener(modalForm.events.LOADED, handleLoaded);\n        modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, handleSubmit);\n        modalForm.addEventListener(modalForm.events.CANCEL_BUTTON_PRESSED, handleClose);\n        return () => {\n            const modalForm = modalFormRef.current;\n            const root = modalForm?.modal?.getRoot();\n            const rootEl = root?.[0];\n            rootEl?.removeEventListener(modalForm.events.LOADED, handleLoaded);\n            rootEl?.removeEventListener(modalForm.events.FORM_SUBMITTED, handleSubmit);\n            rootEl?.removeEventListener(modalForm.events.CANCEL_BUTTON_PRESSED, handleClose);\n            root.off(ModalEvents.hidden, handleClose);\n        };\n    });\n    (0,react.useEffect)(() => {\n        if (!modalFormRef.current)\n            return;\n        const modal = modalFormRef.current.modal;\n        if (!modal)\n            return;\n        modal.setTitle(title);\n    }, [title]);\n    return null;\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Notification.tsx\n\nconst NotificationError = ({ children }) => {\n    return react.createElement(\"div\", { className: \"alert alert-danger\" }, children);\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Pix.tsx\n\n\nconst Pix_Pix = ({ id, component = 'block_xp', className, alt = '' }) => {\n    return React.createElement(\"img\", { src: imageUrl(id, component), alt: alt, className: className });\n};\n/* harmony default export */ const components_Pix = ((/* unused pure expression or super */ null && (Pix_Pix)));\n\n;// CONCATENATED MODULE: ./ui/src/components/Spinner.tsx\n\n\n\nconst Spinner_Spinner = ({ className }) => {\n    const alt = useString('loadinghelp', 'core');\n    return React.createElement(Pix, { id: \"y/loading\", component: \"core\", className: className, alt: alt });\n};\n/* harmony default export */ const components_Spinner = ((/* unused pure expression or super */ null && (Spinner_Spinner)));\n\n;// CONCATENATED MODULE: ./ui/src/components/Str.tsx\n\n\nconst Str_Str = ({ id, component = \"block_xp\", a }) => {\n    const str = hooks_useString(id, component, a);\n    return react.createElement(react.Fragment, null, str || \"​\");\n};\n/* harmony default export */ const components_Str = (Str_Str);\n\n;// CONCATENATED MODULE: ./ui/src/components/Button.tsx\n\n\n\n\n\n\nconst CircleButton = ({ className, ...props }) => {\n    return (react.createElement(\"button\", { className: utils_classNames(\"xp-bg-transparent xp-border-0 xp-p-2 xp-flex xp-items-center xp-rounded-full hover:xp-bg-gray-100\", className), type: \"button\", ...props }));\n};\nconst Button = ({ onClick, disabled, children, primary, className, type = \"button\" }) => {\n    const classes = utils_classNames(\"btn\", primary ? \"btn-primary\" : \"btn-default btn-secondary\", className);\n    return (react.createElement(\"button\", { className: classes, onClick: onClick, disabled: disabled, type: type }, children));\n};\nconst SaveButton = ({ onClick, disabled, label, mutation = {}, statePosition = \"after\" }) => {\n    const getStr = useStrings([\"changessaved\", \"error\"], \"core\");\n    const { isLoading, isSuccess, isError } = mutation;\n    const isStateBefore = statePosition === \"before\";\n    const state = (React.createElement(\"div\", { className: `xp-w-8 xp-flex ${isStateBefore ? \"xp-mr-4 xp-justify-end\" : \"xp-ml-4\"}`, \"aria-live\": \"assertive\" },\n        isLoading ? React.createElement(Spinner, null) : null,\n        isSuccess ? React.createElement(Pix, { id: \"i/valid\", component: \"core\", alt: getStr(\"changessaved\") }) : null,\n        isError ? React.createElement(Pix, { id: \"i/invalid\", component: \"core\", alt: getStr(\"error\") }) : null));\n    return (React.createElement(\"div\", { className: \"xp-flex xp-items-center\" },\n        isStateBefore ? state : null,\n        React.createElement(\"div\", { className: \"\" },\n            React.createElement(Button, { primary: true, onClick: onClick, disabled: disabled || isLoading }, label || React.createElement(Str, { id: \"savechanges\", component: \"core\" }))),\n        !isStateBefore ? state : null));\n};\nconst AnchorButton = ({ children, onClick, className, ...props }) => {\n    const anchorButtonProps = useAnchorButtonProps(onClick);\n    return (React.createElement(\"a\", { className: classNames(\"xp-text-inherit xp-no-underline\", className), ...props, ...anchorButtonProps }, children));\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Input.tsx\n\nconst Input = ({ className = '', ...props }) => {\n    /** Apply those classes for normalised styling across themes and versions. */\n    return react.createElement(\"input\", { ...props, className: `xp-m-0 form-control ${className}` });\n};\nconst Select = ({ className = '', ...props }) => {\n    /** Apply those classes for normalised styling across themes and versions. */\n    return react.createElement(\"select\", { ...props, className: `xp-m-0 xp-max-w-auto form-control ${className}` });\n};\nconst Textarea = ({ className = '', ...props }) => {\n    /** Apply those classes for normalised styling across themes and versions. */\n    return React.createElement(\"textarea\", { ...props, className: `xp-m-0 form-control ${className}` });\n};\n/* harmony default export */ const components_Input = (Input);\n\n;// CONCATENATED MODULE: ./ui/src/components/NumberInput.tsx\n\n\n\n\nconst NumInput = ({ className, value, onChange, ...props }) => {\n    const inputProps = hooks_useNumericInputProps(value, onChange);\n    return react.createElement(components_Input, { type: \"text\", ...inputProps, className: className, ...props });\n};\nconst PlainNumberInput = ({ value, onChange, ...props }) => {\n    const inputProps = useNumericInputProps(value, onChange);\n    return React.createElement(\"input\", { type: \"text\", ...inputProps, ...props });\n};\nconst NumberInputWithButtons = ({ onChange, value, min, max, suffix, step = 1, inputProps }) => {\n    const hasMin = typeof min !== \"undefined\";\n    const hasMax = typeof max !== \"undefined\";\n    const minDisabled = hasMin && min >= value;\n    const maxDisabled = hasMax && max <= value;\n    const minusProps = hooks_useAnchorButtonProps(() => {\n        if (minDisabled)\n            return;\n        handleChange(value - step);\n    });\n    const plusProps = hooks_useAnchorButtonProps(() => {\n        if (maxDisabled)\n            return;\n        handleChange(value + step);\n    });\n    const handleChange = (n) => {\n        let final = n;\n        if (hasMin) {\n            final = Math.max(min, final);\n        }\n        if (hasMax) {\n            final = Math.min(max, final);\n        }\n        onChange(final);\n    };\n    const { className: inputClassName, ...remainingInputProps } = inputProps ?? {};\n    const allInputProps = {\n        className: utils_classNames(\"xp-h-auto xp-border-0 xp-text-center xp-rounded-none focus:xp-z-10\", suffix ? \"xp-pr-6\" : null, inputClassName || \"xp-w-16\"),\n        ...remainingInputProps,\n    };\n    return (react.createElement(\"div\", { className: \"xp-inline-flex xp-rounded xp-border xp-border-solid xp-border-gray-300\" },\n        react.createElement(\"a\", { ...minusProps, className: utils_classNames(\"xp-flex-0 xp-border-0 xp-border-gray-300 xp-border-solid xp-border-r xp-rounded-l xp-py-0.5 xp-px-1 xp-flex xp-items-center xp-justify-center\", \"focus:xp-z-10\", minDisabled ? \"xp-bg-gray-100 xp-cursor-pointer xp-text-gray-500\" : \"xp-bg-white xp-text-inherit\") },\n            react.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 20 20\", fill: \"currentColor\", className: \"xp-w-5 xp-h-5\" },\n                react.createElement(\"path\", { fillRule: \"evenodd\", d: \"M4 10a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H4.75A.75.75 0 014 10z\", clipRule: \"evenodd\" }))),\n        react.createElement(\"div\", { className: \"xp-flex-1 xp-relative\" },\n            react.createElement(NumInput, { onChange: handleChange, value: value, ...allInputProps }),\n            suffix ? (react.createElement(\"div\", { className: \"xp-pointer-events-none xp-absolute xp-inset-y-0 xp-right-0 xp-flex xp-items-center xp-pr-2\" },\n                react.createElement(\"span\", { className: \"xp-text-gray-500\" }, suffix))) : null),\n        react.createElement(\"a\", { ...plusProps, className: utils_classNames(\"xp-flex-0 xp-border-0 xp-border-gray-300 xp-border-solid xp-border-l xp-rounded-r xp-py-0.5 xp-px-1 xp-flex xp-items-center xp-justify-center\", \"focus:xp-z-10\", maxDisabled ? \"xp-bg-gray-100 xp-cursor-pointer xp-text-gray-500\" : \"xp-bg-white xp-text-inherit\") },\n            react.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 20 20\", fill: \"currentColor\", className: \"xp-w-5 xp-h-5\" },\n                react.createElement(\"path\", { d: \"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z\" })))));\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/ResourceList.tsx\n\n\n\n\nconst ListEntry = ({ resource, onSelect }) => {\n    if (resource.type === \"header\") {\n        return react.createElement(ListEntryHeader, { label: resource.label });\n    }\n    return (react.createElement(ListEntryItem, { label: resource.label, description: resource.description, isavailable: resource.isavailable, onSelect: onSelect }));\n};\nconst ListEntryItem = ({ label, description, isavailable = true, onSelect }) => {\n    const headingId = useUniqueId();\n    const buttonListeners = useRoleButtonListeners(onSelect);\n    const disabledOpacityClass = `${!isavailable ? \"xp-opacity-60 group-focus:xp-opacity-100 group-hover:xp-opacity-100\" : \"\"}`;\n    return (react.createElement(\"div\", { className: \"xp-p-[0.2rem] xp-relative xp-group focus:xp-z-10 hover:xp-bg-gray-100\" },\n        react.createElement(\"div\", { tabIndex: 0, role: \"button\", \"aria-describedby\": headingId, className: \"xp-px-1.5 xp-py-0.5\", ...buttonListeners },\n            react.createElement(\"div\", { id: headingId, className: `xp-flex` },\n                react.createElement(\"div\", { className: utils_classNames(disabledOpacityClass, \"xp-text-xl xp-text-medium\") }, label),\n                !isavailable ? (react.createElement(\"div\", { className: \"xp-ml-2\" },\n                    react.createElement(\"span\", { className: \"badge badge-pill badge-warning\" },\n                        react.createElement(components_Str, { id: \"unavailable\" })))) : null),\n            description ? (react.createElement(\"div\", { className: utils_classNames(disabledOpacityClass, \"xp-text-gray-500\"), dangerouslySetInnerHTML: { __html: description } })) : null)));\n};\nconst ListEntryHeader = ({ label }) => {\n    return (react.createElement(\"div\", { className: \"xp-px-[0.2rem] xp-bg-gray-200 xp-mt-2 first:xp-mt-0 xp-sticky xp-top-0 xp-z-10\" },\n        react.createElement(\"div\", { className: \"xp-px-1.5 xp-py-1 xp-text-sm xp-leading-tight xp-uppercase\" }, label)));\n};\nconst PlainResourceList = ({ resources, onSelect, emptyContent, }) => {\n    if (!resources.length) {\n        return react.createElement(react.Fragment, null, emptyContent || react.createElement(EmptyResult, null));\n    }\n    return (react.createElement(\"div\", { className: \"xp-flex-1 xp-divide-y xp-divide-gray-200\" }, resources.map((o) => {\n        return react.createElement(ListEntry, { key: `${o.type || \"\"}${o.name}`, resource: o, onSelect: () => onSelect && onSelect(o) });\n    })));\n};\nconst LoadingResourceList = () => {\n    return (react.createElement(\"div\", { className: \"xp-flex-1\" },\n        react.createElement(\"div\", { className: \"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2\" }),\n        react.createElement(\"div\", { className: \"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2\" }),\n        react.createElement(\"div\", { className: \"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2\" }),\n        react.createElement(\"div\", { className: \"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2\" }),\n        react.createElement(\"div\", { className: \"xp-h-8 xp-w-full xp-bg-gray-100 xp-mb-2\" })));\n};\nconst EmptyResult = ({ message, content }) => {\n    return (react.createElement(\"div\", { className: \"xp-flex-1 xp-flex xp-flex-col xp-items-center xp-justify-center xp-text-center\" },\n        react.createElement(\"div\", null, message || react.createElement(components_Str, { id: \"noneareavailable\" })),\n        content ? react.createElement(\"div\", { className: \"xp-my-2\" }, content) : null));\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/Icons.tsx\n\nconst Bars3BottomLeftIcon = ({ className }) => (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", fill: \"currentColor\", className: className },\n    React.createElement(\"path\", { fillRule: \"evenodd\", d: \"M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75H12a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z\", clipRule: \"evenodd\" })));\nconst CheckBadgeIconSolid = ({ className }) => (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", fill: \"currentColor\", className: className },\n    React.createElement(\"path\", { fillRule: \"evenodd\", d: \"M8.603 3.799A4.49 4.49 0 0112 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 013.498 1.307 4.491 4.491 0 011.307 3.497A4.49 4.49 0 0121.75 12a4.49 4.49 0 01-1.549 3.397 4.491 4.491 0 01-1.307 3.497 4.491 4.491 0 01-3.497 1.307A4.49 4.49 0 0112 21.75a4.49 4.49 0 01-3.397-1.549 4.49 4.49 0 01-3.498-1.306 4.491 4.491 0 01-1.307-3.498A4.49 4.49 0 012.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 011.307-3.497 4.49 4.49 0 013.497-1.307zm7.007 6.387a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z\", clipRule: \"evenodd\" })));\nconst LanguageIcon = ({ className }) => (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", fill: \"currentColor\", className: className },\n    React.createElement(\"path\", { fillRule: \"evenodd\", d: \"M9 2.25a.75.75 0 01.75.75v1.506a49.38 49.38 0 015.343.371.75.75 0 11-.186 1.489c-.66-.083-1.323-.151-1.99-.206a18.67 18.67 0 01-2.969 6.323c.317.384.65.753.998 1.107a.75.75 0 11-1.07 1.052A18.902 18.902 0 019 13.687a18.823 18.823 0 01-5.656 4.482.75.75 0 11-.688-1.333 17.323 17.323 0 005.396-4.353A18.72 18.72 0 015.89 8.598a.75.75 0 011.388-.568A17.21 17.21 0 009 11.224a17.17 17.17 0 002.391-5.165 48.038 48.038 0 00-8.298.307.75.75 0 01-.186-1.489 49.159 49.159 0 015.343-.371V3A.75.75 0 019 2.25zM15.75 9a.75.75 0 01.68.433l5.25 11.25a.75.75 0 01-1.36.634l-1.198-2.567h-6.744l-1.198 2.567a.75.75 0 01-1.36-.634l5.25-11.25A.75.75 0 0115.75 9zm-2.672 8.25h5.344l-2.672-5.726-2.672 5.726z\", clipRule: \"evenodd\" })));\nconst PaperAirplaneIconSolid = ({ className }) => (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", fill: \"currentColor\", className: className },\n    React.createElement(\"path\", { d: \"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z\" })));\nconst ChevronLeftIconSolid = ({ className }) => (react.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", fill: \"none\", viewBox: \"0 0 24 24\", strokeWidth: 1.5, stroke: \"currentColor\", className: className },\n    react.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", d: \"M15.75 19.5 8.25 12l7.5-7.5\" })));\n\n;// CONCATENATED MODULE: ./ui/src/components/Slider.tsx\n\n\n\n\n\n\nconst slideClasses = \"xp-absolute xp-inset-0 xp-transform-gpu xp-transition-transform xp-duration-300\";\nconst slideNextClasses = `${slideClasses} xp-translate-x-full`;\nconst slidePrevClasses = `${slideClasses} xp--translate-x-full`;\nconst Slider = ({ children: rawChildren, index }) => {\n    const [internalIndex, setInternalIndex] = (0,react.useState)(index);\n    const slidesRef = (0,react.useRef)([]);\n    const children = react.Children.toArray(rawChildren).filter(Boolean);\n    const nSlides = children.length;\n    // When the number of slides changes.\n    (0,react.useEffect)(() => {\n        slidesRef.current = slidesRef.current.slice(0, nSlides);\n    }, [nSlides]);\n    // Effects when the current slide changes.\n    (0,react.useEffect)(() => {\n        const Aria = getModule(\"core/aria\");\n        slidesRef.current.forEach((item, i) => {\n            if (i === internalIndex) {\n                Aria.unhide(item);\n                item?.focus();\n            }\n            else {\n                Aria.hide(item);\n            }\n        });\n    }, [internalIndex]);\n    // When the index changes, update the local one. We do this to let a child render the slide that\n    // we should transition to before we update the internal index that would render the child instantly.\n    // This allows for the number of slides to be dynamically created by the parent.\n    (0,react.useEffect)(() => {\n        setInternalIndex(index);\n    }, [index]);\n    return (react.createElement(\"div\", { className: \"xp-w-full xp-h-full xp-overflow-hidden xp-relative\" }, react.Children.map(children, (child, i) => {\n        const isActive = i === internalIndex;\n        const isPast = i < internalIndex;\n        return (react.createElement(\"div\", { ref: (el) => (slidesRef.current[i] = el), className: isActive ? slideClasses : isPast ? slidePrevClasses : slideNextClasses }, child));\n    })));\n};\nconst SliderTester = () => {\n    const [index, setIndex] = useState(0);\n    return (React.createElement(\"div\", null,\n        React.createElement(\"div\", { className: \"xp-h-[500px] xp-w-full\" },\n            React.createElement(Slider, { index: index },\n                React.createElement(Slide, null,\n                    \"Slide 1\",\n                    React.createElement(\"div\", { className: \"xp-w-4\", style: { height: \"1000px\" } })),\n                React.createElement(Slide, null,\n                    \"Slide 2\",\n                    React.createElement(\"div\", { className: \"xp-w-4\", style: { height: \"100px\" } })),\n                React.createElement(Slide, null,\n                    \"Slide 3\",\n                    React.createElement(\"div\", { className: \"xp-w-4\", style: { height: \"2000px\" } })),\n                React.createElement(Slide, null,\n                    \"Slide 4\",\n                    React.createElement(\"div\", { className: \"xp-w-4\", style: { height: \"500px\" } })),\n                React.createElement(Slide, null,\n                    \"Slide 5\",\n                    React.createElement(\"div\", { className: \"xp-w-4\", style: { height: \"1500px\" } })))),\n        React.createElement(\"button\", { onClick: () => setIndex((i) => Math.max(0, Math.min(5 - 1, i - 1))) }, \"Prev\"),\n        React.createElement(\"button\", { onClick: () => setIndex((i) => Math.max(0, Math.min(5 - 1, i + 1))) }, \"Next\")));\n};\nconst Slide = ({ children, header, footer, }) => {\n    /* Firefox requires the vertical scroll to be in the child element, else something odd happens. */\n    return (react.createElement(\"div\", { className: \"xp-w-full xp-h-full xp-flex xp-flex-col\" },\n        header,\n        react.createElement(\"div\", { className: \"xp-flex xp-flex-col xp-grow xp-overflow-y-auto\" }, children),\n        footer));\n};\nconst SlideHeader = ({ children, hasBack, onBack, }) => {\n    return (react.createElement(\"div\", { className: \"xp-mb-2 xp-flex xp-flex-row xp-items-center xp-gap-4\" },\n        hasBack ? (react.createElement(\"div\", { className: \"shrink-0 xp-grow-0\" },\n            react.createElement(CircleButton, { onClick: onBack, type: \"button\", className: \"xp--mr-2\" },\n                react.createElement(ChevronLeftIconSolid, { className: \"xp-h-6 xp-w-6\" }),\n                react.createElement(\"span\", { className: \"xp-sr-only\" },\n                    react.createElement(components_Str, { id: \"back\", component: \"core\" }))))) : null,\n        react.createElement(\"div\", { className: \"xp-flex-1\" }, children)));\n};\nconst SlideHeaderWithFilter = ({ hasBack, onBack, onFilterChange, filterValue, filterPlaceholder, }) => {\n    const filterStr = hooks_useString(\"filterellipsis\");\n    const handleChange = (0,react.useCallback)((e) => {\n        onFilterChange && onFilterChange(e.currentTarget.value || \"\");\n    }, [onFilterChange]);\n    return (react.createElement(SlideHeader, { hasBack: true, onBack: onBack },\n        react.createElement(\"input\", { className: \"form-control xp-w-full\", type: \"text\", value: filterValue || \"\", placeholder: filterPlaceholder || filterStr, onChange: handleChange })));\n};\n\n;// CONCATENATED MODULE: ./ui/src/components/RuleWizard.tsx\n\n\n\n\n\n\n\n\n\n\n\nconst CmResourceList = ({ courseId, filterTerm, onSelect, resetFilterTerm, options = {} }) => {\n    const query = (0,es.useQuery)([\"cm-resource-list\", courseId, options], async () => {\n        const Ajax = await getModuleAsync(\"core/ajax\");\n        return (await Ajax.call([\n            {\n                methodname: \"block_xp_search_modules\",\n                args: { courseid: courseId, query: \"*\", options },\n            },\n        ])[0]);\n    });\n    const resources = (0,react.useMemo)(() => {\n        const normalisedFilterTerm = (filterTerm || \"\").trim().toLowerCase();\n        const data = query.data || [];\n        return data.reduce((carry, section, idx) => {\n            const modules = normalisedFilterTerm === \"\"\n                ? section.modules\n                : section.modules.filter((module) => {\n                    return module.name.includes(normalisedFilterTerm);\n                });\n            if (!modules.length) {\n                return carry;\n            }\n            // Only show headers if we have multiple sections.\n            if (data.length > 1) {\n                carry.push({ name: idx, label: section.name, type: \"header\" });\n            }\n            modules.forEach((module) => {\n                carry.push({ name: module.cmid, label: module.name });\n            });\n            return carry;\n        }, []);\n    }, [query.data, filterTerm]);\n    if (!query.isSuccess || query.isLoading) {\n        return react.createElement(LoadingResourceList, null);\n    }\n    return (react.createElement(PlainResourceList, { resources: resources, onSelect: (r) => onSelect(r.name), emptyContent: react.createElement(EmptyResult, { message: react.createElement(components_Str, { id: \"nothingmatchesfilter\" }), content: resetFilterTerm ? (react.createElement(Button, { onClick: resetFilterTerm },\n                react.createElement(components_Str, { id: \"clearfilter\" }))) : null }) }));\n};\nconst CmResourceListSlide = ({ courseId, onSelect, hasBack, onBack, cmListOptions, }) => {\n    const [filterTerm, setFilterTerm] = (0,react.useState)(\"\");\n    return (react.createElement(Slide, { header: react.createElement(SlideHeaderWithFilter, { hasBack: hasBack, onBack: onBack, filterValue: filterTerm, onFilterChange: setFilterTerm }) },\n        react.createElement(CmResourceList, { options: cmListOptions, courseId: courseId, onSelect: onSelect, filterTerm: filterTerm, resetFilterTerm: () => setFilterTerm(\"\") })));\n};\nconst SectionResourceList = ({ courseId, onSelect, options = {} }) => {\n    const query = (0,es.useQuery)([\"section-resource-list\", courseId, options], async () => ajaxRequest(\"block_xp_get_sections\", { courseid: courseId, options }));\n    const resources = (0,react.useMemo)(() => {\n        const data = query.data || [];\n        return data.reduce((carry, section, idx) => {\n            carry.push({ name: section.number, label: section.name });\n            return carry;\n        }, []);\n    }, [query.data]);\n    if (!query.isSuccess || query.isLoading) {\n        return react.createElement(LoadingResourceList, null);\n    }\n    return (react.createElement(PlainResourceList, { resources: resources, onSelect: (r) => onSelect(r.name), emptyContent: react.createElement(EmptyResult, { message: react.createElement(components_Str, { id: \"nothingmatchesfilter\" }) }) }));\n};\nconst CmNameSlide = ({ onBack, config, setConfig, }) => {\n    const getStr = hooks_useStrings([\"rule:eq\", \"rule:contains\"]);\n    return (react.createElement(Slide, { header: react.createElement(SlideHeader, { hasBack: true, onBack: onBack }) },\n        react.createElement(\"div\", { className: \"\" },\n            react.createElement(\"label\", { htmlFor: \"xp-rule-cmname-name\", className: \"xp-m-0\" },\n                react.createElement(components_Str, { id: \"activityname\" })),\n            react.createElement(\"div\", { className: \"xp-flex xp-gap-2\" },\n                react.createElement(Select, { value: config.filterint1, onChange: (e) => setConfig({ filterint1: parseInt(e.currentTarget.value, 10) || 0 }), className: \"xp-w-auto\" },\n                    react.createElement(\"option\", { value: \"0\" }, getStr(\"rule:eq\")),\n                    react.createElement(\"option\", { value: \"1\" }, getStr(\"rule:contains\"))),\n                react.createElement(components_Input, { id: \"xp-rule-cmname-name\", value: config.filterchar1 || \"\", onChange: (e) => setConfig({ filterchar1: e.currentTarget.value, filterint1: config.filterint1 ?? 0 }), maxLength: 255 })))));\n};\nconst anyFilterMethodStuff = {\n    getSlide: () => null,\n    hasSlide: false,\n    isConfigValid: () => true,\n    isSlideRequiringSubmit: false,\n};\nconst filterMethoStuff = {\n    cm: {\n        getSlide: (props) => (react.createElement(CmResourceListSlide, { cmListOptions: {\n                completionenabled: props.method.scopeoptions?.completionenabled,\n                type: props.method.scopeoptions?.type,\n            }, hasBack: props.hasBack, onBack: props.onBack, courseId: props.courseId, onSelect: (cmid) => {\n                props.setConfig({ filtercmid: cmid });\n                props.onContinue();\n            } })),\n        hasSlide: true,\n        isConfigValid: () => true,\n        isSlideRequiringSubmit: false,\n    },\n    cmname: {\n        getSlide: (props) => react.createElement(CmNameSlide, { onBack: props.onBack, config: props.config, setConfig: props.setConfig }),\n        hasSlide: true,\n        isConfigValid: (config) => typeof config.filterchar1 === \"string\" && config.filterchar1.trim() !== \"\",\n        isSlideRequiringSubmit: true,\n    },\n    section: {\n        getSlide: (props) => (react.createElement(Slide, { header: react.createElement(SlideHeader, { hasBack: props.hasBack, onBack: props.onBack }) },\n            react.createElement(SectionResourceList, { courseId: props.courseId, onSelect: (num) => {\n                    props.setConfig({ filterint1: num, filtercourseid: props.courseId });\n                    props.onContinue();\n                } }))),\n        hasSlide: true,\n        isConfigValid: () => true,\n        isSlideRequiringSubmit: false,\n    },\n    any: anyFilterMethodStuff,\n    anycm: anyFilterMethodStuff,\n    anycourse: anyFilterMethodStuff,\n    anysection: anyFilterMethodStuff,\n    thiscourse: anyFilterMethodStuff,\n};\nconst defaultConfig = { points: 10 };\nconst RuleWizardModal = (props) => {\n    const getStr = hooks_useStrings([\"chooseacondition\"]);\n    const getCoreStr = hooks_useStrings([\"continue\", \"save\"], \"core\");\n    const [selectedMethod, setSelectedMethod] = (0,react.useState)(null);\n    const [config, setConfig] = (0,react.useState)(defaultConfig);\n    const [index, setIndex] = (0,react.useState)(0);\n    const handleSelected = (method) => {\n        if (!(method in filterMethoStuff)) {\n            return;\n        }\n        setSelectedMethod(method);\n        setIndex(1);\n    };\n    const handleIndexChange = (rawIndex) => {\n        const newIndex = Math.max(0, rawIndex);\n        if (newIndex === 0) {\n            setConfig(defaultConfig);\n        }\n        setIndex(newIndex);\n    };\n    const handleAddToConfig = (data) => {\n        setConfig({ ...config, ...data });\n    };\n    const handleBack = () => {\n        handleIndexChange(index - 1);\n    };\n    const resetState = (0,react.useCallback)(() => {\n        setSelectedMethod(null);\n        setConfig(defaultConfig);\n        setIndex(0);\n    }, []);\n    (0,react.useEffect)(() => {\n        // Reset the state when the modal is closed/hidden.\n        if (!props.show) {\n            resetState();\n        }\n    }, [props.show]);\n    const methodStuff = selectedMethod ? filterMethoStuff[selectedMethod] ?? null : null;\n    const isLastStep = index === (methodStuff?.hasSlide ? 2 : 1);\n    const isStepContinue = !isLastStep;\n    const isStepValid = methodStuff && index === 1 ? methodStuff?.isConfigValid(config) : true;\n    const isStepRequiringButton = Boolean(methodStuff?.isSlideRequiringSubmit);\n    const canClickSaveButton = (isLastStep || isStepRequiringButton) && isStepValid;\n    const handleSave = (e) => {\n        e.preventDefault();\n        if (!canClickSaveButton) {\n            return;\n        }\n        if (isStepContinue) {\n            handleIndexChange(index + 1);\n            return;\n        }\n        if (!selectedMethod) {\n            return;\n        }\n        props.onSave({ filter: selectedMethod, config });\n    };\n    const handleClose = () => {\n        props.onClose();\n    };\n    const methodSlide = selectedMethod\n        ? methodStuff?.getSlide({\n            setConfig: handleAddToConfig,\n            config,\n            hasBack: index === 1,\n            onBack: handleBack,\n            onContinue: () => handleIndexChange(index + 1),\n            method: props.method,\n            courseId: props.courseid,\n        })\n        : null;\n    const sortedFilters = (0,react.useMemo)(() => {\n        return props.filters.sort((a, b) => {\n            const wa = a.weight ?? null;\n            const wb = b.weight ?? null;\n            if (wa === wb)\n                return 0;\n            if (wa === null || wb === null)\n                return 1; // Always show null last.\n            if (wa === 0)\n                return -1; // Always show the 0 weight first.\n            return wb - wa; // Descending order.\n        });\n    }, [props.filters]);\n    return (react.createElement(SaveCancelModal, { show: props.show, large: true, defaultHeight: 500, canSave: canClickSaveButton, onSave: handleSave, onClose: handleClose, saveButtonText: isStepContinue ? getCoreStr(\"continue\") : getCoreStr(\"save\"), title: getStr(\"chooseacondition\") },\n        react.createElement(Slider, { index: index },\n            react.createElement(Slide, null,\n                react.createElement(PlainResourceList, { onSelect: (r) => handleSelected(r.name), resources: sortedFilters })),\n            selectedMethod && methodSlide ? methodSlide : null,\n            react.createElement(Slide, { header: react.createElement(SlideHeader, { hasBack: true, onBack: handleBack }) },\n                react.createElement(\"div\", { className: \"\" },\n                    react.createElement(\"div\", { className: \"\" },\n                        react.createElement(\"label\", { htmlFor: \"xp-rule-pts\", className: \"xp-m-0\" },\n                            react.createElement(components_Str, { id: \"pointstoaward\" })),\n                        react.createElement(\"div\", null,\n                            react.createElement(NumberInputWithButtons, { value: config.points, onChange: (points) => handleAddToConfig({ points }), min: 0, max: 9999999, inputProps: { id: \"xp-rule-pts\", className: \"xp-w-24\" } })),\n                        react.createElement(\"p\", { className: \"xp-text-gray-500 xp-m-0 xp-mt-1\" },\n                            react.createElement(components_Str, { id: \"pointstoaward_help\" }))))))));\n};\n\n// EXTERNAL MODULE: ./node_modules/react-query/es/core/queryClient.js + 4 modules\nvar queryClient = __webpack_require__(98);\n;// CONCATENATED MODULE: ./ui/src/lib/query.ts\n\n\nconst query_queryClient = new queryClient/* QueryClient */.E({\n    defaultOptions: {\n        queries: {\n            staleTime: 1000 * 60,\n            onError: (err) => getModule(\"core/notification\").exception(err),\n        },\n        mutations: {\n            onError: (err) => getModule(\"core/notification\").exception(err),\n        },\n    },\n});\n\n;// CONCATENATED MODULE: ./ui/src/lib/types.ts\nvar ContextLevel;\n(function (ContextLevel) {\n    ContextLevel[ContextLevel[\"System\"] = 10] = \"System\";\n    ContextLevel[ContextLevel[\"User\"] = 30] = \"User\";\n    ContextLevel[ContextLevel[\"CourseCategory\"] = 40] = \"CourseCategory\";\n    ContextLevel[ContextLevel[\"Course\"] = 50] = \"Course\";\n    ContextLevel[ContextLevel[\"Module\"] = 70] = \"Module\";\n})(ContextLevel || (ContextLevel = {}));\n;\n;\n\n;// CONCATENATED MODULE: ./ui/src/completion-rules.tsx\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst useRules = (contextid, types, childcontextid) => {\n    return (0,es.useQuery)([\"rules\", contextid, types, childcontextid], async () => {\n        const data = await ajaxRequest(\"block_xp_get_rules\", {\n            contextid,\n            types,\n            childcontextid,\n        });\n        return data.map((data) => ({\n            ...data,\n            method: data.typename,\n            filter: data.filtername,\n        }));\n    });\n};\nconst useAddRuleMutation = (contextid, childcontextid, { onSuccess }) => {\n    return (0,es.useMutation)(async ({ method, filter, config }) => {\n        return ajaxRequest(\"block_xp_create_rule\", {\n            contextid,\n            childcontextid: childcontextid ?? 0,\n            points: config.points ?? 0,\n            type: {\n                name: method,\n                char1: config.typechar1 ?? null,\n            },\n            filter: {\n                name: filter,\n                courseid: config.filtercourseid ?? null,\n                cmid: config.filtercmid ?? null,\n                int1: config.filterint1 ?? null,\n                char1: config.filterchar1 ?? null,\n            },\n        });\n    }, {\n        onSuccess,\n    });\n};\nconst useDeleteRuleMutation = () => {\n    return (0,es.useMutation)(async ({ id }) => {\n        return ajaxRequest(\"block_xp_delete_rule\", { id });\n    });\n};\nconst AppContext = react.createContext({\n    rules: [],\n    addRule: () => { },\n    editRule: (id) => { },\n    removeRule: (id) => { },\n});\nconst availableRuleTypes = [\"cm_completion\", \"section_completion\", \"course_completion\"];\nconst guessMethodFromLocation = () => {\n    return Math.max(0, availableRuleTypes.indexOf((window.location.hash ?? \"\").replace(/^#/, \"\")));\n};\nconst updateLocationFromMethodIndex = (idx) => {\n    const hash = \"#\" + availableRuleTypes[idx];\n    window.location.hash = hash;\n};\nconst App = (props) => {\n    const queryClient = (0,es.useQueryClient)();\n    const [selectedTabIndex, setSelectedTabIndex] = (0,react.useState)(guessMethodFromLocation);\n    const [optimisticallyDeleted, setOptimisticallyDeleted] = (0,react.useState)([]);\n    const childcontextid = props.childcontext?.id ?? null;\n    const currentCourseId = props.childcontext?.contextlevel === ContextLevel.Course ? props.childcontext.instanceid : props.world.courseid;\n    const [isAdding, setIsAdding] = (0,react.useState)(false);\n    const [isEditing, setIsEditing] = (0,react.useState)(null);\n    const [isDeleting, setIsDeleting] = (0,react.useState)(null);\n    const getStr = hooks_useStrings([\"deletecondition\", \"editcondition\", \"ruleadded\"]);\n    const rulesQuery = useRules(props.world.contextid, availableRuleTypes, childcontextid);\n    const addRuleMutation = useAddRuleMutation(props.world.contextid, childcontextid, {\n        onSuccess: () => {\n            invalidateCurrentQuery();\n            setIsAdding(false);\n            const Toast = getModule(\"core/toast\");\n            Toast && Toast.add(getStr(\"ruleadded\"));\n        },\n    });\n    const deleteRuleMutation = useDeleteRuleMutation();\n    const handleSelectedTabIndexChange = (idx) => {\n        setSelectedTabIndex(idx);\n        setIsAdding(false);\n        setIsEditing(null);\n        setIsDeleting(null);\n        updateLocationFromMethodIndex(idx);\n    };\n    const currentRuleType = availableRuleTypes[selectedTabIndex];\n    const rules = (0,react.useMemo)(() => {\n        return (rulesQuery.data || []).filter((r) => !optimisticallyDeleted.includes(r.id));\n    }, [rulesQuery.data, optimisticallyDeleted]);\n    const invalidateCurrentQuery = (0,react.useCallback)(() => {\n        queryClient.invalidateQueries([\"rules\", props.world.contextid, availableRuleTypes, childcontextid]);\n    }, [queryClient, props]);\n    const ruleTypesByName = (0,react.useMemo)(() => {\n        return props.ruletypes.reduce((acc, ruletype) => {\n            acc[ruletype.name] = ruletype;\n            return acc;\n        }, {});\n    }, [props.ruletypes]);\n    const groupedRules = (0,react.useMemo)(() => {\n        return rules.reduce((acc, rule) => {\n            if (!acc[rule.method]) {\n                acc[rule.method] = [];\n            }\n            acc[rule.method].push(rule);\n            return acc;\n        }, {});\n    }, [rules]);\n    const currentMethodFilters = (0,react.useMemo)(() => {\n        if (!ruleTypesByName[currentRuleType]?.filters) {\n            return [];\n        }\n        return props.rulefilters\n            .filter((filter) => ruleTypesByName[currentRuleType].filters.includes(filter.name))\n            .filter((filter) => filter.ismultipleallowed || !groupedRules[currentRuleType]?.some((rule) => rule.filter === filter.name));\n    }, [currentRuleType, props.rulefilters, groupedRules]);\n    const canAdd = true;\n    const showAddBtnInTabs = canAdd && groupedRules[currentRuleType]?.length;\n    if (rulesQuery.isLoading || rulesQuery.isError) {\n        return react.createElement(AppLoading, null);\n    }\n    return (react.createElement(AppContext.Provider, { value: {\n            rules,\n            addRule: () => setIsAdding(true),\n            editRule: (ruleId) => setIsEditing(ruleId),\n            removeRule: (ruleId) => setIsDeleting(ruleId),\n        } },\n        react.createElement(\"div\", null,\n            react.createElement(tabs/* Tab */.o.Group, { selectedIndex: selectedTabIndex, onChange: handleSelectedTabIndexChange },\n                react.createElement(tabs/* Tab */.o.List, { as: \"div\", className: \"nav nav-tabs\" },\n                    react.createElement(tabs/* Tab */.o, { as: react.Fragment }, ({ selected }) => (react.createElement(\"button\", { className: utils_classNames(\"nav-item nav-link\", selected ? \"active\" : null) },\n                        react.createElement(components_Str, { id: \"activity\", component: \"core\" })))),\n                    react.createElement(tabs/* Tab */.o, { as: react.Fragment }, ({ selected }) => (react.createElement(\"button\", { className: utils_classNames(\"nav-item nav-link\", selected ? \"active\" : null) },\n                        react.createElement(components_Str, { id: \"section\", component: \"core\" })))),\n                    react.createElement(tabs/* Tab */.o, { as: react.Fragment }, ({ selected }) => (react.createElement(\"button\", { className: utils_classNames(\"nav-item nav-link\", selected ? \"active\" : null) },\n                        react.createElement(components_Str, { id: \"course\", component: \"core\" })))),\n                    react.createElement(\"div\", { className: \"xp-flex-1 xp-flex xp-justify-end xp-items-center\" }, showAddBtnInTabs ? (react.createElement(\"button\", { className: \"btn btn-primary btn-sm\", onClick: () => setIsAdding(true) },\n                        react.createElement(components_Str, { id: \"add\", component: \"core\" }))) : null)),\n                react.createElement(tabs/* Tab */.o.Panels, { className: \"xp-mt-4\" },\n                    react.createElement(tabs/* Tab */.o.Panel, null, \"cm_completion\" in ruleTypesByName ? (react.createElement(CompletionRules, { rules: groupedRules.cm_completion, type: ruleTypesByName[\"cm_completion\"], filters: props.rulefilters })) : (react.createElement(NotificationError, null,\n                        react.createElement(components_Str, { id: \"unknowntypea\", a: \"cm_completion\" })))),\n                    react.createElement(tabs/* Tab */.o.Panel, null, \"section_completion\" in ruleTypesByName ? (react.createElement(CompletionRules, { rules: groupedRules.section_completion, type: ruleTypesByName[\"section_completion\"], filters: props.rulefilters })) : (react.createElement(NotificationError, null,\n                        react.createElement(components_Str, { id: \"unknowntype\", a: \"section_completion\" })))),\n                    react.createElement(tabs/* Tab */.o.Panel, null, \"course_completion\" in ruleTypesByName ? (react.createElement(CompletionRules, { rules: groupedRules.course_completion, type: ruleTypesByName[\"course_completion\"], filters: props.rulefilters })) : (react.createElement(NotificationError, null,\n                        react.createElement(components_Str, { id: \"unknowntype\", a: \"course_completion\" }))))))),\n        react.createElement(RuleWizardModal, { show: isAdding, courseid: currentCourseId, contextlevel: props.world.contextlevel, method: ruleTypesByName[currentRuleType], filters: currentMethodFilters, onClose: () => setIsAdding(false), onSave: ({ filter, config }) => {\n                addRuleMutation.mutateAsync({ method: currentRuleType, filter, config });\n            } }),\n        react.createElement(DeleteModal, { show: isDeleting !== null, onClose: () => setIsDeleting(null), onDelete: () => {\n                if (!isDeleting)\n                    return;\n                setOptimisticallyDeleted([...optimisticallyDeleted, isDeleting]);\n                deleteRuleMutation.mutate({ id: isDeleting }, {\n                    onError: () => {\n                        setOptimisticallyDeleted(optimisticallyDeleted.filter((id) => id !== isDeleting));\n                    },\n                    onSuccess: () => {\n                        invalidateCurrentQuery();\n                    },\n                    onSettled: () => {\n                        setIsDeleting(null);\n                    },\n                });\n            }, title: getStr(\"deletecondition\") },\n            react.createElement(components_Str, { id: \"areyousure\", component: \"core\" })),\n        isEditing ? (react.createElement(ModalForm, { formClass: \"block_xp\\\\form\\\\rule\", formArgs: { id: isEditing }, title: getStr(\"editcondition\"), onClose: () => setIsEditing(null), onSubmit: () => {\n                setIsEditing(null);\n                invalidateCurrentQuery();\n            } })) : null));\n};\nconst groupRulesByFilter = (rules) => {\n    if (!rules)\n        return [];\n    const filterNames = rules.map((rule) => rule.filter).filter((value, index, self) => self.indexOf(value) === index);\n    return filterNames\n        .map((filterName) => {\n        const rulesForFilter = rules.filter((rule) => rule.filter === filterName);\n        return { filter: filterName, rules: rulesForFilter };\n    })\n        .filter((group) => group.rules.length > 0);\n};\nconst NoRulesZeroState = ({ onClick }) => {\n    return (react.createElement(\"div\", { className: \"xp-rounded xp-border-dashed xp-border-2 xp-p-4 xp-py-6 xp-text-center xp-border-gray-200\" },\n        react.createElement(\"div\", { className: \"xp-text-xl xp-font-bold xp-mb-4\" },\n            react.createElement(components_Str, { id: \"noconditionsyet\" })),\n        react.createElement(\"div\", null,\n            react.createElement(components_Str, { id: \"noconditionsyetintro\" })),\n        react.createElement(\"div\", { className: \"xp-mt-4\" },\n            react.createElement(\"button\", { className: \"btn btn-primary\", onClick: onClick },\n                react.createElement(components_Str, { id: \"add\", component: \"core\" })))));\n};\nconst CompletionRules = ({ rules, type, filters }) => {\n    const filteredRules = (0,react.useMemo)(() => rules?.filter((r) => type.filters.includes(r.filter) && filters.find((f) => f.name === r.filter)), [rules, type.filters]);\n    const groupedRules = (0,react.useMemo)(() => groupRulesByFilter(filteredRules), [filteredRules]);\n    const { addRule, removeRule, editRule } = react.useContext(AppContext);\n    const handleAddClick = () => {\n        addRule();\n    };\n    console.log(filteredRules);\n    if (!filteredRules?.length) {\n        return react.createElement(NoRulesZeroState, { onClick: handleAddClick });\n    }\n    return (react.createElement(\"div\", null, groupedRules.map(({ filter, rules }) => {\n        const ruleFilter = filters.find((f) => f.name === filter);\n        if (!ruleFilter)\n            return null;\n        return (react.createElement(RulesSection, { key: filter, title: ruleFilter?.label, description: ruleFilter?.description }, rules.map((rule) => {\n            return (react.createElement(Rule, { key: rule.id, points: rule.points, label: rule.label, onDelete: () => removeRule(rule.id), onEdit: () => editRule(rule.id) }));\n        })));\n    })));\n};\nconst RulesSection = ({ children, title, description, }) => {\n    return (react.createElement(\"div\", { className: \"xp-bg-gray-50 xp-rounded xp-px-1 xp-py-0.5 my-2\" },\n        react.createElement(\"div\", null,\n            react.createElement(\"div\", { className: \"_xp-mt-2 xp-font-bold\" }, title),\n            react.createElement(\"div\", { className: \"xp-mt-1 xp-mb-2 xp-text-sm xp-text-gray-500\" }, description),\n            react.createElement(\"div\", { className: \"xp-mt-1 xp-space-y-2\" }, children))));\n};\nconst Rule = ({ points, label, onDelete, onEdit, }) => {\n    return (react.createElement(\"div\", { className: \"xp-px-2 xp-py-2 xp-bg-gray-200 xp-rounded\" },\n        react.createElement(\"div\", { className: \"xp-flex xp-gap-2\" },\n            react.createElement(\"div\", { className: \"xp-shrink-0 xp-flex xp-items-center\" },\n                react.createElement(\"div\", { className: \"xp-bg-blue-500 xp-min-w-[5ch] xp-text-center xp-text-white xp-rounded xp-px-2 xp-py-0.5 xp-font-bold\" }, points !== null ? `+${points}` : \"-\")),\n            react.createElement(\"div\", { className: \"xp-grow xp-flex xp-items-center\" },\n                react.createElement(\"div\", { className: \"xp-grow\" }, label)),\n            react.createElement(\"div\", { className: \"xp-shrink-0\" },\n                react.createElement(RuleDropdown, { onDelete: onDelete, onEdit: onEdit })))));\n};\nconst RuleDropdown = ({ onEdit, onDelete }) => {\n    const deleteProps = hooks_useAnchorButtonProps(onDelete);\n    const editProps = hooks_useAnchorButtonProps(onEdit);\n    return (react.createElement(Dropdown, { buttonLabel: react.createElement(components_Str, { id: \"options\", component: \"core\" }), items: [\n            { id: \"edit\", label: react.createElement(components_Str, { id: \"edit\", component: \"core\" }), props: editProps },\n            { id: \"delete\", label: react.createElement(components_Str, { id: \"delete\", component: \"core\" }), props: deleteProps, danger: true },\n        ] }));\n};\nfunction startApp(node, props) {\n    react_dom.render(react.createElement(contexts_AddonContext.Provider, { value: makeAddonContextValueFromAppProps(props) },\n        react.createElement(es.QueryClientProvider, { client: query_queryClient },\n            react.createElement(App, { ...props }))), node);\n}\nconst dependencies = makeDependenciesDefinition(commonStaticModulesToDependOn);\n\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = __webpack_modules__;\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/chunk loaded */\n/******/ \t(() => {\n/******/ \t\tvar deferred = [];\n/******/ \t\t__webpack_require__.O = (result, chunkIds, fn, priority) => {\n/******/ \t\t\tif(chunkIds) {\n/******/ \t\t\t\tpriority = priority || 0;\n/******/ \t\t\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n/******/ \t\t\t\tdeferred[i] = [chunkIds, fn, priority];\n/******/ \t\t\t\treturn;\n/******/ \t\t\t}\n/******/ \t\t\tvar notFulfilled = Infinity;\n/******/ \t\t\tfor (var i = 0; i < deferred.length; i++) {\n/******/ \t\t\t\tvar [chunkIds, fn, priority] = deferred[i];\n/******/ \t\t\t\tvar fulfilled = true;\n/******/ \t\t\t\tfor (var j = 0; j < chunkIds.length; j++) {\n/******/ \t\t\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n/******/ \t\t\t\t\t\tchunkIds.splice(j--, 1);\n/******/ \t\t\t\t\t} else {\n/******/ \t\t\t\t\t\tfulfilled = false;\n/******/ \t\t\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t}\n/******/ \t\t\t\tif(fulfilled) {\n/******/ \t\t\t\t\tdeferred.splice(i--, 1)\n/******/ \t\t\t\t\tvar r = fn();\n/******/ \t\t\t\t\tif (r !== undefined) result = r;\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t\treturn result;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t(() => {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__webpack_require__.n = (module) => {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\t() => (module['default']) :\n/******/ \t\t\t\t() => (module);\n/******/ \t\t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/create fake namespace object */\n/******/ \t(() => {\n/******/ \t\tvar getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\n/******/ \t\tvar leafPrototypes;\n/******/ \t\t// create a fake namespace object\n/******/ \t\t// mode & 1: value is a module id, require it\n/******/ \t\t// mode & 2: merge all properties of value into the ns\n/******/ \t\t// mode & 4: return value when already ns object\n/******/ \t\t// mode & 16: return value when it's Promise-like\n/******/ \t\t// mode & 8|1: behave like require\n/******/ \t\t__webpack_require__.t = function(value, mode) {\n/******/ \t\t\tif(mode & 1) value = this(value);\n/******/ \t\t\tif(mode & 8) return value;\n/******/ \t\t\tif(typeof value === 'object' && value) {\n/******/ \t\t\t\tif((mode & 4) && value.__esModule) return value;\n/******/ \t\t\t\tif((mode & 16) && typeof value.then === 'function') return value;\n/******/ \t\t\t}\n/******/ \t\t\tvar ns = Object.create(null);\n/******/ \t\t\t__webpack_require__.r(ns);\n/******/ \t\t\tvar def = {};\n/******/ \t\t\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n/******/ \t\t\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n/******/ \t\t\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n/******/ \t\t\t}\n/******/ \t\t\tdef['default'] = () => (value);\n/******/ \t\t\t__webpack_require__.d(ns, def);\n/******/ \t\t\treturn ns;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/runtimeId */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.j = 834;\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/jsonp chunk loading */\n/******/ \t(() => {\n/******/ \t\t// no baseURI\n/******/ \t\t\n/******/ \t\t// object to store loaded and loading chunks\n/******/ \t\t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n/******/ \t\t// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\n/******/ \t\tvar installedChunks = {\n/******/ \t\t\t834: 0\n/******/ \t\t};\n/******/ \t\t\n/******/ \t\t// no chunk on demand loading\n/******/ \t\t\n/******/ \t\t// no prefetching\n/******/ \t\t\n/******/ \t\t// no preloaded\n/******/ \t\t\n/******/ \t\t// no HMR\n/******/ \t\t\n/******/ \t\t// no HMR manifest\n/******/ \t\t\n/******/ \t\t__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n/******/ \t\t\n/******/ \t\t// install a JSONP callback for chunk loading\n/******/ \t\tvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n/******/ \t\t\tvar [chunkIds, moreModules, runtime] = data;\n/******/ \t\t\t// add \"moreModules\" to the modules object,\n/******/ \t\t\t// then flag all \"chunkIds\" as loaded and fire callback\n/******/ \t\t\tvar moduleId, chunkId, i = 0;\n/******/ \t\t\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n/******/ \t\t\t\tfor(moduleId in moreModules) {\n/******/ \t\t\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n/******/ \t\t\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t}\n/******/ \t\t\t\tif(runtime) var result = runtime(__webpack_require__);\n/******/ \t\t\t}\n/******/ \t\t\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n/******/ \t\t\tfor(;i < chunkIds.length; i++) {\n/******/ \t\t\t\tchunkId = chunkIds[i];\n/******/ \t\t\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n/******/ \t\t\t\t\tinstalledChunks[chunkId][0]();\n/******/ \t\t\t\t}\n/******/ \t\t\t\tinstalledChunks[chunkId] = 0;\n/******/ \t\t\t}\n/******/ \t\t\treturn __webpack_require__.O(result);\n/******/ \t\t}\n/******/ \t\t\n/******/ \t\tvar chunkLoadingGlobal = globalThis[\"webpackChunkblock_xp\"] = globalThis[\"webpackChunkblock_xp\"] || [];\n/******/ \t\tchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\n/******/ \t\tchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n/******/ \t})();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module depends on other loaded chunks and execution need to be delayed\n/******/ \tvar __webpack_exports__ = __webpack_require__.O(undefined, [224], () => (__webpack_require__(913)))\n/******/ \t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n/******/ \t\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});;"],"names":["define","deferred","leafPrototypes","getProto","__webpack_modules__","__unused_webpack_module","__webpack_exports__","__webpack_require__","r","d","App","dependencies","startApp","tabs","react","react_dom","es","menu","utils_classNames","args","filter","Boolean","join","uniqueId","Dropdown","_ref","buttonLabel","items","createElement","W","as","className","Button","Items","map","item","key","id","Item","_ref2","active","props","danger","label","AppLoading","M","window","modules","ajaxRequest","method","getModuleAsync","call","methodname","getString","component","a","util","get_string","hasString","str","getModule","name","amd","Promise","resolve","reject","require","mod","loadStringCache","maxItems","keys","purge","length","idx","Math","max","slice","forEach","set","value","push","get","fifoCache","loadString","cacheKey","promise","loadStrings","ids","get_strings","makeAddonContextValueFromAppProps","activated","enablepromo","promourl","addon","contexts_AddonContext","createContext","hooks_useAnchorButtonProps","onClick","href","role","useRoleButtonListeners","useModules","modulesPromise","useRef","modulesRef","ready","setReady","useState","useEffect","current","all","module","cancelled","then","loadedModles","reduce","acc","i","useCallback","e","preventDefault","onKeyDown","useUniqueId","Date","now","hooks_useString","wasKnownAtMount","useMemo","isLoaded","setLoaded","err","hooks_useStrings","idsForKey","allKnownAtMount","every","SaveCancelModal","_ref3","children","onClose","onSave","show","title","saveButtonText","defaultHeight","large","canSave","modalPromise","modalRef","getSaveButton","node","getFooter","querySelector","setSaveButtonText","text","saveBtn","textContent","ModalFactory","create","type","types","SAVE_CANCEL","body","modal","ModalEvents","root","getRoot","handleSave","handleClose","updateReactNodeHeight","getBody","reactNode","height","clientHeight","parseFloat","getComputedStyle","paddingTop","paddingBottom","style","deattachResize","addEventListener","on","save","hidden","shown","off","hide","setTitle","attr","removeAttribute","setAttribute","setButtonAttribute","createPortal","DeleteModal","_ref4","onDelete","deleteStr","getDeleteButton","deleteButton","classList","add","btn","ModalForm","_ref5","formClass","formArgs","onSubmit","modalFormRef","modalConfig","modalForm","handleLoaded","handleSubmit","events","LOADED","FORM_SUBMITTED","CANCEL_BUTTON_PRESSED","_modalForm$modal","rootEl","removeEventListener","NotificationError","_ref6","components_Str","_ref9","Fragment","CircleButton","_ref10","_ref11","disabled","primary","classes","Select","_ref15","components_Input","_ref14","NumInput","_ref17","onChange","inputProps","valueAsString","toString","externalValue","setExternalValue","internalValue","setInternalValue","target","replace","onBlur","v","parseInt","hooks_useNumericInputProps","NumberInputWithButtons","_ref19","min","suffix","step","hasMin","hasMax","minDisabled","maxDisabled","minusProps","handleChange","plusProps","n","final","inputClassName","remainingInputProps","allInputProps","xmlns","viewBox","fill","fillRule","clipRule","ListEntry","_ref20","resource","onSelect","ListEntryHeader","ListEntryItem","description","isavailable","_ref21","headingId","buttonListeners","disabledOpacityClass","tabIndex","dangerouslySetInnerHTML","__html","_ref22","PlainResourceList","_ref23","resources","emptyContent","o","EmptyResult","LoadingResourceList","_ref24","message","content","ChevronLeftIconSolid","_ref29","strokeWidth","stroke","strokeLinecap","strokeLinejoin","slideClasses","slideNextClasses","slidePrevClasses","Slider","_ref30","rawChildren","index","internalIndex","setInternalIndex","slidesRef","Children","toArray","nSlides","Aria","unhide","focus","child","isActive","isPast","ref","el","Slide","_ref31","header","footer","SlideHeader","_ref32","hasBack","onBack","SlideHeaderWithFilter","_ref33","onFilterChange","filterValue","filterPlaceholder","filterStr","currentTarget","placeholder","CmResourceList","_ref34","courseId","filterTerm","resetFilterTerm","options","query","useQuery","async","Ajax","courseid","normalisedFilterTerm","trim","toLowerCase","data","carry","section","includes","cmid","isSuccess","isLoading","CmResourceListSlide","_ref35","cmListOptions","setFilterTerm","SectionResourceList","_ref36","number","CmNameSlide","_ref37","config","setConfig","getStr","htmlFor","filterint1","filterchar1","maxLength","anyFilterMethodStuff","getSlide","hasSlide","isConfigValid","isSlideRequiringSubmit","filterMethoStuff","cm","completionenabled","scopeoptions","_props$method$scopeop","_props$method$scopeop2","filtercmid","onContinue","cmname","num","filtercourseid","any","anycm","anycourse","anysection","thiscourse","defaultConfig","points","RuleWizardModal","getCoreStr","selectedMethod","setSelectedMethod","setIndex","handleIndexChange","rawIndex","newIndex","handleAddToConfig","handleBack","resetState","methodStuff","isLastStep","isStepContinue","isStepValid","isStepRequiringButton","canClickSaveButton","methodSlide","sortedFilters","filters","sort","b","wa","weight","wb","query_queryClient","E","defaultOptions","queries","staleTime","onError","exception","mutations","ContextLevel","AppContext","rules","addRule","editRule","removeRule","availableRuleTypes","guessMethodFromLocation","indexOf","location","hash","queryClient","useQueryClient","selectedTabIndex","setSelectedTabIndex","optimisticallyDeleted","setOptimisticallyDeleted","childcontextid","childcontext","_props$childcontext","currentCourseId","contextlevel","Course","instanceid","world","isAdding","setIsAdding","isEditing","setIsEditing","isDeleting","setIsDeleting","rulesQuery","contextid","typename","filtername","useRules","addRuleMutation","onSuccess","useMutation","char1","typechar1","int1","useAddRuleMutation","invalidateCurrentQuery","Toast","deleteRuleMutation","currentRuleType","invalidateQueries","ruleTypesByName","ruletypes","ruletype","groupedRules","rule","currentMethodFilters","_ruleTypesByName$curr","rulefilters","ismultipleallowed","_groupedRules$current","some","showAddBtnInTabs","_groupedRules$current2","isError","Provider","ruleId","Group","selectedIndex","updateLocationFromMethodIndex","List","_ref41","selected","_ref42","_ref43","Panels","Panel","CompletionRules","cm_completion","section_completion","course_completion","_ref44","mutateAsync","mutate","onSettled","NoRulesZeroState","_ref45","_ref46","filteredRules","find","f","self","filterName","rulesForFilter","group","groupRulesByFilter","useContext","handleAddClick","console","log","_ref47","ruleFilter","RulesSection","Rule","onEdit","_ref48","_ref49","RuleDropdown","_ref50","deleteProps","editProps","render","QueryClientProvider","client","names","optional","list","isOptional","charAt","substring","loader","mods","setModule","makeDependenciesDefinition","__webpack_module_cache__","moduleId","cachedModule","undefined","exports","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","splice","getter","__esModule","getPrototypeOf","obj","__proto__","t","mode","this","ns","def","getOwnPropertyNames","definition","defineProperty","enumerable","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","globalThis","bind"],"mappings":"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"}